<!DOCTYPE html>
<html lang="es">
<head>
  <%- include('../partials/head', { titulo: titulo }) %>
</head>
<body>
  <%- include('../partials/navbar') %>
  
  <div class="container mt-4">
    <h1 class="mb-4">Mis Facturas</h1>
    
    <%- include('../partials/mensajes') %>
    
    <div class="card">
      <div class="card-body">
        <% if (facturas.length === 0) { %>
          <div class="text-center py-5">
            <i class="fas fa-file-invoice-dollar fa-4x mb-3 text-muted"></i>
            <h4>No tienes facturas</h4>
            <p>Las facturas se generarán automáticamente cuando completes una reserva</p>
            <a href="/cliente/mis-reservas" class="btn btn-primary mt-3">Ver Mis Reservas</a>
          </div>
        <% } else { %>
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Número de Factura</th>
                  <th>Fecha de Emisión</th>
                  <th>Sucursal</th>
                  <th>Subtotal</th>
                  <th>ISV</th>
                  <th>Total</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                <% facturas.forEach(factura => { %>
                  <tr>
                    <td><%= factura.NumeroFactura %></td>
                    <td><%= new Date(factura.FechaEmision).toLocaleDateString() %></td>
                    <td><%= factura.NombreSucursal %></td>
                    <td>L.<%= factura.SubTotal.toFixed(2) %></td>
                    <td>L.<%= factura.ISV.toFixed(2) %></td>
                    <td>L.<%= factura.Total.toFixed(2) %></td>
                    <td>
                      <a href="/cliente/facturas/<%= factura.FacturaID %>" class="btn btn-sm btn-primary">
                        <i class="fas fa-eye"></i>
                      </a>
                    </td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        <% } %>
      </div>
    </div>
  </div>
  
  <%- include('../partials/footer') %>
  <%- include('../partials/scripts') %>
</body>
</html>

